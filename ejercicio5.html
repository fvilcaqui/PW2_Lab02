<!DOCTYPE html>
<html>

<body>
  <h1>Calculadora</h1>
  <form id="form">
    <label for="numValores">Cantidad de Valores:</label>
    <input type="number" id="numValores" min="1" required>
    <button type="submit">Crear Tabla</button>
  </form>
  <div id="tablaContainer"></div>
  <button id="calcularBtn" disabled>Calcular Suma</button>
  <p id="resultado"></p>
  
  <script>
    document.getElementById('form').addEventListener('submit', function(e) {
      e.preventDefault();
      var numValores = parseInt(document.getElementById('numValores').value);
      crearTabla(numValores);
      document.getElementById('calcularBtn').disabled = false;
    });
    
    function crearTabla(numValores) {
      var espacios = new Array(2);
      var valores = new Array(numValores);
      var tabla = document.getElementById("tablaContainer");
      tabla.innerHTML = "";
      for (var y = 2; y < 100; y++) {
         if(numValores % y == 0){
             espacios[0] = y;
             espacios[1] = numValores/y;
             break;
         }
      }
      if(espacios[0]==0 || espacios[0]==null ){
          espacios[0] = 1;
          espacios[1] = numValores;
      }  
      for (var i = 0; i < numValores; i++) {
        valores[i] = Math.floor(Math.random() * 100) + 1;
      }
      var h = 0;
      for (var k = 0; k < espacios[1]; k++) {
        for (var l = 0; l < espacios[0]; l++) {
          tabla.innerHTML += valores[h];
          tabla.innerHTML += " ";
          h++;
        }
        tabla.innerHTML += "<br>";
      }
      document.getElementById('calcularBtn').addEventListener('click', function() {
      var suma = 0;
      for (var q = 0; q < numValores; q++) {
          suma += valores[q];
      }
      document.getElementById('resultado').textContent = 'La suma es: ' + suma;
    });     
    }
  </script>
</body>
</html>